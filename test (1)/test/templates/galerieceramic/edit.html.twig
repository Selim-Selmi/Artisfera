{% extends 'base.html.twig' %}

{% block body %}
{{parent()}}

<div class="container d-flex justify-content-center align-items-center vh-100">
    <div class="card shadow-lg p-4" style="width: 50rem; border-radius: 10px;">
        
        <!-- Titre du formulaire -->
        <h2 class="text-center mb-4 fw-bold">Modifier Œuvre</h2>

        {{ form_start(form, {'attr': {'enctype': 'multipart/form-data'}}) }}

        <!-- Formulaire en deux colonnes -->
        <div class="row">
            <div class="col-md-6">
                <div class="mb-3">
                    {{ form_label(form.nom, 'Nom de l\'œuvre', {'label_attr': {'class': 'form-label fw-bold'}}) }}
                    {{ form_widget(form.nom, {'attr': {'class': 'form-control'}}) }}
                </div>
                <div class="mb-3">
                    {{ form_label(form.type, 'Type', {'label_attr': {'class': 'form-label fw-bold'}}) }}
                    {{ form_widget(form.type, {'attr': {'class': 'form-control'}}) }}
                </div>
                <div class="mb-3">
                    {{ form_label(form.matiere, 'Matière', {'label_attr': {'class': 'form-label fw-bold'}}) }}
                    {{ form_widget(form.matiere, {'attr': {'class': 'form-control'}}) }}
                </div>
                <div class="mb-3">
                    {{ form_label(form.dimensions, 'Dimensions', {'label_attr': {'class': 'form-label fw-bold'}}) }}
                    {{ form_widget(form.dimensions, {'attr': {'class': 'form-control'}}) }}
                </div>
                <div class="mb-3">
                    {{ form_label(form.categorie, 'Catégorie', {'label_attr': {'class': 'form-label fw-bold'}}) }}
                    {{ form_widget(form.categorie, {'attr': {'class': 'form-control'}}) }}
                </div>
            </div>

            <div class="col-md-6">
                <div class="mb-3">
                    {{ form_label(form.image, 'Image', {'label_attr': {'class': 'form-label fw-bold'}}) }}
                    {{ form_widget(form.image, {'attr': {'class': 'form-control'}}) }}
                    {# <img src="{{ asset(oeuvre.image) }}" alt="Image de l'œuvre {{ oeuvre.nom }}" style="max-width: 90px; height: auto;" /> #}

               <img src="{{ asset('uploads/images/' ~ oeuvre.image) }}" alt="Image de l'œuvre {{ oeuvre.nom }}" style="max-width: 150px; height: auto;">
                </div>
                <div class="mb-3">
                    {{ form_label(form.description, 'Description', {'label_attr': {'class': 'form-label fw-bold'}}) }}
                    {{ form_widget(form.description, {'attr': {'class': 'form-control'}}) }}
                </div>
                <div class="mb-3">
                    {{ form_label(form.couleur, 'Couleur', {'label_attr': {'class': 'form-label fw-bold'}}) }}
                    {{ form_widget(form.couleur, {'attr': {'class': 'form-control'}}) }}
                </div>
                <div class="mb-3">
                    {{ form_label(form.createur, 'Créateur', {'label_attr': {'class': 'form-label fw-bold'}}) }}
                    {{ form_widget(form.createur, {'attr': {'class': 'form-control'}}) }}
                </div>
            </div>
        </div>

        <!-- Boutons en bas bien alignés -->
        {# <div class="d-flex justify-content-end mt-4">
            <a href="{{ path('app_galerieceramic') }}" class="btn btn-secondary me-2">Annuler</a>
            <button type="submit" class="btn btn-primary">Modifier</button>
        </div> #}

        <!-- Boutons en bas bien alignés -->
<div class="d-flex justify-content-end mt-4">
    <a href="{{ path('app_galerieceramic') }}" class="btn btn-secondary me-2">Annuler</a>
    <button type="button" class="btn btn-primary" id="update-btn">Modifier</button>
</div>


        {{ form_end(form) }}
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
    document.getElementById("update-btn").addEventListener("click", function(event) {
        event.preventDefault(); // Prevent default form submission
        
        Swal.fire({
            title: "Are you sure?",
            text: "Do you want to update this artwork?",
            icon: "question",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Yes, update it!",
            cancelButtonText: "Cancel"
        }).then((result) => {
            if (result.isConfirmed) {
                document.querySelector("form").submit(); // Submit the form if confirmed
            }
        });
    });
});
</script>

{% endblock %}
